"use strict";$(function(){document.documentElement.style.fontSize=window.innerWidth/750*100+"px";var t=$(".wrap").width();400<$(window).width()&&(t=400);var a=$("canvas")[0],h=a.getContext("2d");a.width=t,a.height=t,h.translate(t/2,t/2);var d=Math.PI/180,p=-90,u=t/2-50;$.ajax({url:"/page",dataType:"json",async:!1,success:function(t){t.map(function(t,a){var e,i,n,o,l=p+t.jiaodu,s=(p+t.jiaodu/2)*d,r=Math.cos(s)*u,c=Math.sin(s)*u;h.beginPath(),h.moveTo(0,0),h.arc(0,0,u,p*d,l*d),h.fillStyle=t.color,h.fill(),p=l,h.closePath(),h.strokeStyle=t.color,a<5&&(console.log(r),e=r,i=c,h.beginPath(),h.moveTo(e,i),h.stroke()),o="<li><h5><i></i>"+(n=t).name+"<span>上映13天 4亿</span></h5><p>"+n.bili+"</p><p>"+n.num+"</p><p>244.54</p></li>",$(".tabledata .ul").append(o)})}}),h.beginPath(),h.arc(0,0,t/2-110,0,360*d),h.fillStyle="#fff",h.strokeStyle="rgba(255,255,255,.5)",h.lineWidth=20,h.stroke(),h.fill()});